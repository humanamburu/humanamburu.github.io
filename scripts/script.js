function JQ(e){return this.selector=e,this instanceof JQ?this.set(e):new JQ(e)}JQ.prototype.elements=[],JQ.prototype.selector,JQ.prototype.set=function(e){return"string"==typeof e?this.elements=document.querySelectorAll(e):e instanceof JQ&&(this.elements=this.elements.concat(e.elements)),this},JQ.prototype.append=function(e){if(e instanceof JQ&&[].forEach.call(this.elements,function(t){for(var n=0;n<e.elements.length;n++)t.appendChild(e.elements[n])}),e instanceof Node&&[].forEach.call(this.elements,function(t){t.appendChild(e.cloneNode(!0))}),"function"==typeof e)for(var t=0;t<this.elements.length;t++)$(this.selector).elements[t].innerHTML+=e(t);if("string"==typeof e)for(var t=0;t<this.elements.length;t++)$(this.selector).elements[t].innerHTML+=e;return this},window.$=JQ;
function Layout(){function e(){var e='<header class="header"><div class="header-search"><img class="search-icon" src="styles/search.png" alt="search"><input class="search" type="search"></div></header>',a='<main class="main"><ul class="videos"></ul></main>',s='<footer class="footer"></footer>';return e+a+s}return{createTemplate:e}}
var swipe=new Swipe,resizer=new ResizeCalculator,video=new Video,layout=new Layout;$("body").append(layout.createTemplate());for(var i=0;11>i;i++){var href="http://vk.com/humanamburu",hrefTag=i+"Крутой ролик на 5 миллиардов просомтров почти гангнамстайл",imgSrc="styles/test.png",person="Fdasd sadasdsa",date="20.20.2015",views=200255522,text="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum consequatur vero iste, iusto fugit sapiente itaque molestias eos. Eius molestias consectetur assumenda, quibusdam, necessitatibus quisquam neque sunt. Veniam, pariatur, esse?";$(".videos").append(video.createTemplate(href,hrefTag,imgSrc,person,date,views,text))}swipe.set(),resizer.set();
function Page(){function a(a){var e='<a href="#" class="page" data-number="'+a+'"></a>';return e}return{pageTemplate:a}}
function isInteger(e){return(0^e)===e}function ResizeCalculator(){function e(e,t){return number=t/e,isInteger(number)?number:parseInt(number.toFixed(0))}function t(e){{var t,n=document.querySelectorAll(".page"),o=document.querySelector(".footer");new Swipe}if(n.length<l)for(;n.length<l;)$(".footer").append(e(n.length)),n=document.querySelectorAll(".page");else if(n.length>l)for(;n.length>l;)t=document.querySelector('.page[data-number="'+(n.length-1)+'"]'),o.removeChild(t),n=document.querySelectorAll(".page")}function n(){var n=document.querySelectorAll(".video"),o=n.length,r=document.querySelector(".videos"),c=(document.querySelectorAll(".page"),new Page);document.body.clientWidth<700?(r.style.width="calc(100vw * "+o+")",l=e(1,o)):document.body.clientWidth<1050?(r.style.width="calc(50vw *"+o+")",l=e(2,o)):document.body.clientWidth<1400?(r.style.width="calc(33.3vw *"+o+")",l=e(3,o)):document.body.clientWidth>1500&&(r.style.width="calc(25vw *"+o+")",l=e(4,o)),t(c.pageTemplate)}var l=0;return{set:function(){n(),window.addEventListener("resize",n)}}}
function Search(){function e(e){n.addEventListener("keyup",function(n){13===n.keyCode&&e.call(this,n)})}var n=document.querySelector(".search");return{init:e}}
function Swipe(){function e(e){for(var t=(document.querySelector(".videos"),document.querySelectorAll(".page")),n=0;n<t.length;n++)n==e?(t[n].style.background=o,t[n].style.border="2px solid white"):(t[n].style.background="white",t[n].style.border="none")}function t(t){function n(e){var t;t=void 0===e.changedTouches?e.pageX:e.changedTouches[0].pageX,s.style.transform="translate3D("+(-c+t-d)+"px, 0px, 0px)"}function o(t){var s,u=document.querySelector(".videos"),a=document.querySelectorAll(".page");s=void 0===t.changedTouches?t.pageX:t.changedTouches[0].pageX,document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",n),u.style.transition="transform 0.5s",d>s&&r!=a.length-1&&r++,s>d&&r&&r--,e(r),c=document.body.clientWidth*r,u.style.transform="translate3D(-"+c+"px, 0px, 0px)",document.removeEventListener("mouseup",o),document.removeEventListener("touchend",o)}var d,s=document.querySelector(".videos"),c=document.body.clientWidth*r;d=void 0===t.changedTouches?t.pageX:t.changedTouches[0].pageX,s.style.transition="transform 0s",document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",o),document.addEventListener("touchend",o)}function n(t){var n=document.querySelector(".videos");r=t,e(t),n.style.transition="transform 0.8s",trans=document.body.clientWidth*t,n.style.transform="translate3D(-"+trans+"px, 0px, 0px)"}var o="#CB3131",r=0;return{set:function(){var o=document.querySelector(".videos");e(r),o.addEventListener("mousedown",t,!1),o.addEventListener("touchstart",t,!1),document.querySelector(".footer").addEventListener("click",function(e){number=e.target.dataset.number,void 0!=number&&n(number)}),window.addEventListener("resize",function(){trans=document.body.clientWidth*r,o.style.transition="transform 0.0s",o.style.transform="translate3D(-"+trans+"px, 0px, 0px)"})}}}
function Video(){function i(i,s,l,e,a,d,t){var v='<li class="video">',r='<a href="'+i+'" class="name">'+s+"</a>",c='<div class="video-preview"><img src="'+l+'" alt="videoPreview" ondrag="return false" ondragdrop="return false" ondragstart="return false"></div>',o='<div class="video-statistic"><ul class="video-statistic-list"><li><div class="person-icon">'+e+'</div></li><li><div class="date"> '+a+'</div></li><li><div class="views">'+d+"</div></li></ul></div>",n='<div class="mobile-video-statistic"><ul class="mobile-video-statistic-list"><li>'+e+"</li><li>"+a+"</li><li>"+d+"</li></ul></div>",u='<div class="video-description">'+t+"</div>",f="</li>";return v+r+c+o+n+u+f}return{createTemplate:i}}